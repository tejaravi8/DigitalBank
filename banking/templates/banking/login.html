<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Digital Bank | Login</title>
<link rel="icon" type="image/x-icon" href="https://img.icons8.com/color/96/bank-building.png">


<style>
/* -------------------- GLOBAL -------------------- */
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: #F3F4F6;
}

/* -------------------- LAYOUT -------------------- */
.container {
    display: flex;
    height: 100vh;
}

/* -------------------- LEFT BRAND -------------------- */
.left-panel {
    flex: 1;
    background: linear-gradient(135deg, #1E3A8A, #2563EB);
    color: white;
    padding: 60px;
    display: flex;
    align-items: center;
}

.brand-box {
    max-width: 420px;
}

.brand-logo {
    width: 80px;
    margin-bottom: 20px;
}

.brand-title {
    font-size: 42px;
    font-weight: 700;
    margin-bottom: 12px;
}

.brand-tagline {
    font-size: 18px;
    line-height: 1.6;
    opacity: 0.9;
}

/* -------------------- RIGHT FORM -------------------- */
.right-panel {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
}

.card {
    width: 380px;
    background: white;
    padding: 34px;
    border-radius: 18px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}

.card h2 {
    text-align: center;
    color: #1E3A8A;
    margin-bottom: 24px;
    font-size: 26px;
}

/* -------------------- FORM -------------------- */
input {
    width: 100%;
    padding: 14px 16px;
    margin-bottom: 14px;
    border-radius: 12px;
    border: 1px solid #CBD5E1;
    font-size: 15px;
}

button {
    width: 100%;
    padding: 14px;
    background: #1E3A8A;
    color: white;
    border: none;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
}

button:hover {
    background: #17347A;
}

#msg {
    margin-top: 12px;
    text-align: center;
    color: #DC2626;
}

/* -------------------- FOOTER LINK -------------------- */
.signup {
    text-align: center;
    margin-top: 14px;
}

.signup a {
    color: #1E3A8A;
    font-weight: 600;
    text-decoration: none;
}

/* -------------------- MOBILE -------------------- */
@media(max-width: 900px) {
    .container {
        flex-direction: column;
    }
    .left-panel {
        height: 260px;
        justify-content: center;
        text-align: center;
    }
}
</style>
</head>

<body>

<div class="container">

    <!-- BRAND -->
    <div class="left-panel">
        <div class="brand-box">
            <img src="https://img.icons8.com/color/96/bank-building.png" class="brand-logo">
            <div class="brand-title">Digital Bank</div>
            <div class="brand-tagline">
                Secure â€¢ Smart â€¢ Simple Banking<br>
                Access your money anytime, anywhere.
            </div>
        </div>
    </div>

    <!-- LOGIN -->
    <div class="right-panel">
        <div class="card">
            <h2>Welcome Back ðŸ‘‹</h2>

            <form id="loginForm">
                <input name="username" placeholder="Username" required>
                <input name="password" type="password" placeholder="Password" required>
                <button>Login</button>
            </form>

            <p id="msg"></p>

            <div class="signup">
                Donâ€™t have an account?
                <a href="/register/">Create one</a>
            </div>
        </div>
    </div>

</div>

<script>
document.getElementById("loginForm").onsubmit = async (e) => {
    e.preventDefault();
    const body = Object.fromEntries(new FormData(e.target).entries());

    const res = await fetch("/api/auth/login/", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(body)
    });

    const out = await res.json();

    if (res.ok) {
    localStorage.setItem("token", out.token);

        if (out.is_staff) {
        // Admin logged in via user login page
            window.location.href = "/admin-panel/dashboard/";
        } else {
        // Normal user
            window.location.href = "/dashboard/";
        }
    } else {
    msg.innerText = out.error || "Invalid credentials";
    }

};
</script>

</body>
</html>
